<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script>                <div id="61f4551d-8264-4afd-b5c7-61fae775c5f1" class="plotly-graph-div" style="height:1200px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("61f4551d-8264-4afd-b5c7-61fae775c5f1")) {                    Plotly.newPlot(                        "61f4551d-8264-4afd-b5c7-61fae775c5f1",                        [{"bingroup":"x","hovertemplate":"Minutes=%{x}\u003cbr\u003ecount=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"","nbinsx":10,"orientation":"v","showlegend":false,"x":{"dtype":"f8","bdata":"48O1owEVBUBl+L27A9IcQPdFwQsaGVBABDV8C+sGBEAaMeqRPTkHQHr5eS+acd4\u002fcIoPNGfGREA="},"xaxis":"x","yaxis":"y","type":"histogram"},{"customdata":[["0","0"]],"hovertemplate":"Session %{y}\u003cbr\u003eStart: %{x}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"width":10},"mode":"lines","name":"Session 0","x":["2025-09-11T18:04:58.393468","2025-09-11T18:07:36.508890"],"y":["Session 0","Session 0"],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"customdata":[["1","1"]],"hovertemplate":"Session %{y}\u003cbr\u003eStart: %{x}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"width":10},"mode":"lines","name":"Session 1","x":["2025-09-12T00:10:39.999553","2025-09-12T00:17:52.305095"],"y":["Session 1","Session 1"],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"customdata":[["2","2"]],"hovertemplate":"Session %{y}\u003cbr\u003eStart: %{x}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"width":10},"mode":"lines","name":"Session 2","x":["2025-09-16T09:53:26.244660","2025-09-16T10:57:49.777543"],"y":["Session 2","Session 2"],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"customdata":[["3","3"]],"hovertemplate":"Session %{y}\u003cbr\u003eStart: %{x}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"width":10},"mode":"lines","name":"Session 3","x":["2025-09-16T16:06:20.225063","2025-09-16T16:08:50.427743"],"y":["Session 3","Session 3"],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"customdata":[["4","4"]],"hovertemplate":"Session %{y}\u003cbr\u003eStart: %{x}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"width":10},"mode":"lines","name":"Session 4","x":["2025-09-17T09:04:50.262539","2025-09-17T09:07:44.439507"],"y":["Session 4","Session 4"],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"customdata":[["5","5"]],"hovertemplate":"Session %{y}\u003cbr\u003eStart: %{x}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"width":10},"mode":"lines","name":"Session 5","x":["2025-09-17T15:33:20.920318","2025-09-17T15:33:49.461342"],"y":["Session 5","Session 5"],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"customdata":[["6","6"]],"hovertemplate":"Session %{y}\u003cbr\u003eStart: %{x}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"width":10},"mode":"lines","name":"Session 6","x":["2025-09-17T16:08:40.934015","2025-09-17T16:50:13.935486"],"y":["Session 6","Session 6"],"type":"scatter","xaxis":"x2","yaxis":"y2"},{"mode":"number","title":{"text":"Avg Duration (min)"},"value":17.380657119047616,"type":"indicator","domain":{"x":[0.0,0.45],"y":[0.3888888888888889,0.6111111111111112]}},{"x":["neutral","disappointment","sadness","approval","joy","annoyance","disapproval","fear","excitement","nervousness","curiosity","realization","surprise","admiration","confusion","desire","anger","gratitude","optimism","love","relief","amusement","pride","disgust","caring"],"y":{"dtype":"i1","bdata":"Lh0VDg0NDQ0MCwYGBAQDAwMCAgIBAQEBAQ=="},"type":"bar","xaxis":"x3","yaxis":"y3"},{"labels":["Normal","Depression","Anxiety","Suicidal","Bipolar"],"values":{"dtype":"i1","bdata":"PBINBgM="},"type":"pie","domain":{"x":[0.0,0.45],"y":[0.0,0.22222222222222224]}}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,0.45]},"yaxis":{"anchor":"x","domain":[0.7777777777777778,1.0]},"xaxis2":{"anchor":"y2","domain":[0.55,1.0]},"yaxis2":{"anchor":"x2","domain":[0.7777777777777778,1.0]},"xaxis3":{"anchor":"y3","domain":[0.55,1.0]},"yaxis3":{"anchor":"x3","domain":[0.3888888888888889,0.6111111111111112]},"annotations":[{"font":{"size":16},"showarrow":false,"text":"Durations","x":0.225,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Timelines","x":0.775,"xanchor":"center","xref":"paper","y":1.0,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Avg Duration","x":0.225,"xanchor":"center","xref":"paper","y":0.6111111111111112,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Emotions","x":0.775,"xanchor":"center","xref":"paper","y":0.6111111111111112,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Distress","x":0.225,"xanchor":"center","xref":"paper","y":0.22222222222222224,"yanchor":"bottom","yref":"paper"},{"font":{"size":16},"showarrow":false,"text":"Flashcards","x":0.775,"xanchor":"center","xref":"paper","y":0.22222222222222224,"yanchor":"bottom","yref":"paper"}],"title":{"text":"Overall Sessions Dashboard"},"height":1200},                        {"responsive": true}                    )                };            </script>        </div>
</body>
</html>
<script>
const sessions_messages = {"0": [{"timestamp": "2025-09-11T18:04:58.393468", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-11T18:05:10.519930", "user_input": "how are you?", "bot_response": "", "emotions": [["curiosity", 0.8954654932022095], ["neutral", 0.6731707453727722]], "distress": [["Normal", 0.9284160733222961]], "sender": "user"}, {"timestamp": "2025-09-11T18:05:59.441620", "user_input": "i am feeling very happy to talk with you", "bot_response": "", "emotions": [["joy", 0.9862307906150818]], "distress": [["Normal", 0.9325520396232605]], "sender": "user"}, {"timestamp": "2025-09-11T18:06:15.923364", "user_input": "I\u2019m happy for them, but I feel lonely inside", "bot_response": "", "emotions": [["sadness", 0.9197692275047302], ["joy", 0.8993453979492188], ["disappointment", 0.21028195321559906]], "distress": [["Normal", 0.7377713918685913]], "sender": "user"}, {"timestamp": "2025-09-11T18:06:30.239731", "user_input": "That was totally unexpected", "bot_response": "", "emotions": [["surprise", 0.9400469660758972]], "distress": [["Normal", 0.9278352856636047]], "sender": "user"}, {"timestamp": "2025-09-11T18:06:51.817191", "user_input": "I\u2019m nervous about the interview, but also excited", "bot_response": "", "emotions": [["excitement", 0.4904235899448395], ["fear", 0.4574703872203827], ["nervousness", 0.3968445062637329]], "distress": [["Anxiety", 0.7942650318145752]], "sender": "user"}, {"timestamp": "2025-09-11T18:07:36.508890", "user_input": "I feel grateful but anxious about the future", "bot_response": "", "emotions": [["gratitude", 0.8419249057769775], ["fear", 0.5284956097602844], ["nervousness", 0.3264769911766052]], "distress": [["Anxiety", 0.9002981185913086]], "sender": "user"}], "1": [{"timestamp": "2025-09-12T00:10:39.999553", "user_input": "I feel like nothing is working out in my life. ", "bot_response": "", "emotions": [["disappointment", 0.8222987055778503], ["neutral", 0.49588823318481445], ["sadness", 0.4815642237663269], ["realization", 0.28783467411994934], ["annoyance", 0.25493061542510986]], "distress": [["Depression", 0.7207769751548767]], "sender": "user"}, {"timestamp": "2025-09-12T00:11:38.029978", "user_input": "I just got my dream job today!  ", "bot_response": "", "emotions": [["excitement", 0.9046146273612976], ["joy", 0.5413563847541809], ["optimism", 0.30498063564300537], ["approval", 0.25508978962898254]], "distress": [["Normal", 0.8705470561981201]], "sender": "user"}, {"timestamp": "2025-09-12T00:12:12.267393", "user_input": "I can\u2019t believe they betrayed me like that.  ", "bot_response": "", "emotions": [["surprise", 0.9050090909004211], ["disappointment", 0.5256868600845337], ["disapproval", 0.47456681728363037], ["annoyance", 0.3268687427043915]], "distress": [["Normal", 0.3822227120399475]], "sender": "user"}, {"timestamp": "2025-09-12T00:12:46.901751", "user_input": "I\u2019m so nervous about tomorrow\u2019s exam, I can\u2019t even sleep.  ", "bot_response": "", "emotions": [["nervousness", 0.7107049226760864], ["fear", 0.6876707077026367]], "distress": [["Anxiety", 0.377163290977478]], "sender": "user"}, {"timestamp": "2025-09-12T00:13:09.538484", "user_input": "I feel like no one really understands me.", "bot_response": "", "emotions": [["disappointment", 0.7945945858955383], ["sadness", 0.5445165038108826], ["annoyance", 0.4685409963130951], ["confusion", 0.45960715413093567], ["realization", 0.23509645462036133]], "distress": [["Normal", 0.31511762738227844]], "sender": "user"}, {"timestamp": "2025-09-12T00:13:35.203155", "user_input": "Finally, the results are out and I passed!", "bot_response": "", "emotions": [["excitement", 0.6109837889671326], ["approval", 0.5868678092956543], ["joy", 0.49780985713005066], ["relief", 0.393938273191452], ["neutral", 0.37494096159935]], "distress": [["Normal", 0.7986422777175903]], "sender": "user"}, {"timestamp": "2025-09-12T00:14:02.214416", "user_input": "Sometimes I feel like ending everything, I don\u2019t see a way out.", "bot_response": "", "emotions": [["disappointment", 0.7367383241653442], ["sadness", 0.600705623626709], ["neutral", 0.48998209834098816], ["realization", 0.4175892472267151], ["annoyance", 0.31984472274780273]], "distress": [["Depression", 0.545924961566925]], "sender": "user"}, {"timestamp": "2025-09-12T00:14:29.842211", "user_input": "I had a normal day, just went to work and came back.", "bot_response": "", "emotions": [["neutral", 0.8741281032562256], ["approval", 0.6810622215270996], ["realization", 0.2068282663822174]], "distress": [["Normal", 0.6384621262550354]], "sender": "user"}, {"timestamp": "2025-09-12T00:15:25.156431", "user_input": "I swing between extreme highs and crushing lows.", "bot_response": "", "emotions": [["neutral", 0.9098806977272034], ["approval", 0.3312373459339142]], "distress": [["Bipolar", 0.561260461807251]], "sender": "user"}, {"timestamp": "2025-09-12T00:15:43.868147", "user_input": "Life is pointless and I don't want to continue.", "bot_response": "", "emotions": [["disapproval", 0.8472636342048645], ["annoyance", 0.37655285000801086], ["disappointment", 0.2823980748653412]], "distress": [["Depression", 0.4990614354610443], ["Suicidal", 0.49945521354675293]], "sender": "user"}, {"timestamp": "2025-09-12T00:16:15.610386", "user_input": "Sometimes I'm very energetic and talk too much, then crash.", "bot_response": "", "emotions": [["neutral", 0.6234604716300964], ["disappointment", 0.45239388942718506], ["approval", 0.43829217553138733], ["nervousness", 0.36787280440330505], ["realization", 0.3501375913619995]], "distress": [["Bipolar", 0.3358054459095001]], "sender": "user"}, {"timestamp": "2025-09-12T00:16:28.064472", "user_input": "I feel mostly fine but worried before presentations.", "bot_response": "", "emotions": [["nervousness", 0.784881591796875], ["fear", 0.6630374789237976], ["approval", 0.2611376643180847], ["disappointment", 0.2556009292602539]], "distress": [["Anxiety", 0.8966066837310791]], "sender": "user"}, {"timestamp": "2025-09-12T00:16:46.715022", "user_input": "I swing between extreme highs and crushing lows.", "bot_response": "", "emotions": [["neutral", 0.9098806977272034], ["approval", 0.3312373459339142]], "distress": [["Bipolar", 0.561260461807251]], "sender": "user"}, {"timestamp": "2025-09-12T00:17:00.213933", "user_input": "I can\u2019t get out of bed, I just want to sleep all day.", "bot_response": "", "emotions": [["desire", 0.8000652194023132], ["neutral", 0.3696802854537964], ["disappointment", 0.3681716322898865], ["disapproval", 0.340778112411499]], "distress": [["Depression", 0.4594849944114685]], "sender": "user"}, {"timestamp": "2025-09-12T00:17:00.328871", "user_input": NaN, "bot_response": "", "emotions": [["neutral", 0.9665207862854004]], "distress": [["Normal", 0.4851212501525879]], "sender": "user"}, {"timestamp": "2025-09-12T00:17:42.320370", "user_input": "I feel so worthless, I don\u2019t think I should keep going.", "bot_response": "", "emotions": [["sadness", 0.8682705760002136], ["disappointment", 0.6153074502944946], ["disapproval", 0.6129587888717651], ["annoyance", 0.2502882480621338]], "distress": [["Depression", 0.46777138113975525], ["Suicidal", 0.49421635270118713]], "sender": "user"}, {"timestamp": "2025-09-12T00:17:52.305095", "user_input": "I can\u2019t sleep because my thoughts won\u2019t stop, and everything feels meaningless", "bot_response": "", "emotions": [["sadness", 0.7102257609367371], ["disappointment", 0.6788753271102905], ["disapproval", 0.6521674394607544], ["annoyance", 0.34467753767967224]], "distress": [["Depression", 0.6326531171798706]], "sender": "user"}], "2": [{"timestamp": "2025-09-16T09:53:26.244660", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-16T09:54:00.657269", "user_input": "i am feeling very low today", "bot_response": "", "emotions": [["sadness", 0.9834901094436646]], "distress": [["Depression", 0.7648776769638062]], "sender": "user"}, {"timestamp": "2025-09-16T09:54:57.077902", "user_input": "i am feeling alone", "bot_response": "", "emotions": [["sadness", 0.9809216856956482]], "distress": [["Depression", 0.623992919921875]], "sender": "user"}, {"timestamp": "2025-09-16T09:55:15.503289", "user_input": "love you so much", "bot_response": "", "emotions": [["love", 0.9746347069740295]], "distress": [["Normal", 0.9254867434501648]], "sender": "user"}, {"timestamp": "2025-09-16T10:19:12.278289", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-16T10:19:19.144750", "user_input": "hi buddy", "bot_response": "", "emotions": [["neutral", 0.8401020765304565]], "distress": [["Normal", 0.9209051728248596]], "sender": "user"}, {"timestamp": "2025-09-16T10:24:17.143613", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-16T10:25:12.248579", "user_input": "bye", "bot_response": "", "emotions": [["neutral", 0.9131028056144714]], "distress": [["Normal", 0.7455086708068848]], "sender": "user"}, {"timestamp": "2025-09-16T10:25:16.420760", "user_input": "exit", "bot_response": "", "emotions": [["neutral", 0.9538442492485046]], "distress": [["Depression", 0.44447827339172363]], "sender": "user"}, {"timestamp": "2025-09-16T10:25:20.837335", "user_input": "quit", "bot_response": "", "emotions": [["neutral", 0.927447497844696]], "distress": [["Normal", 0.6696332693099976]], "sender": "user"}, {"timestamp": "2025-09-16T10:29:05.523199", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-16T10:29:13.484592", "user_input": "my name is Rijwith", "bot_response": "", "emotions": [["neutral", 0.9728788733482361], ["approval", 0.25720369815826416]], "distress": [["Normal", 0.8894875645637512]], "sender": "user"}, {"timestamp": "2025-09-16T10:29:20.107815", "user_input": "how are you?", "bot_response": "", "emotions": [["curiosity", 0.8954654932022095], ["neutral", 0.6731707453727722]], "distress": [["Normal", 0.9284160733222961]], "sender": "user"}, {"timestamp": "2025-09-16T10:29:29.616699", "user_input": "i am very happy today", "bot_response": "", "emotions": [["joy", 0.9916679859161377]], "distress": [["Normal", 0.8778542876243591]], "sender": "user"}, {"timestamp": "2025-09-16T10:29:37.914793", "user_input": "i am not happy today", "bot_response": "", "emotions": [["sadness", 0.8807441592216492]], "distress": [["Normal", 0.8074998259544373]], "sender": "user"}, {"timestamp": "2025-09-16T10:29:52.448688", "user_input": "i feel like hungry", "bot_response": "", "emotions": [["anger", 0.18997856974601746]], "distress": [["Normal", 0.9292505979537964]], "sender": "user"}, {"timestamp": "2025-09-16T10:30:06.065958", "user_input": "i am starving", "bot_response": "", "emotions": [["sadness", 0.9229058623313904], ["disappointment", 0.3237774074077606], ["nervousness", 0.15840014815330505]], "distress": [["Normal", 0.9098061919212341]], "sender": "user"}, {"timestamp": "2025-09-16T10:33:04.985146", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-16T10:33:37.254582", "user_input": "I feel like I can\u2019t handle life, and my chest is always tight with worry.", "bot_response": "", "emotions": [["nervousness", 0.8176387548446655], ["fear", 0.6799182295799255], ["sadness", 0.6353676915168762], ["disappointment", 0.520920991897583]], "distress": [["Anxiety", 0.5594664812088013]], "sender": "user"}, {"timestamp": "2025-09-16T10:33:55.118049", "user_input": "I can\u2019t sleep because my thoughts won\u2019t stop, and everything feels meaningless.", "bot_response": "", "emotions": [["sadness", 0.6810252070426941], ["disappointment", 0.676265299320221], ["disapproval", 0.6382152438163757], ["annoyance", 0.36768001317977905]], "distress": [["Depression", 0.516814112663269]], "sender": "user"}, {"timestamp": "2025-09-16T10:34:10.500059", "user_input": "I feel so worthless, I don\u2019t think I should keep going.", "bot_response": "", "emotions": [["sadness", 0.8682705760002136], ["disappointment", 0.6153074502944946], ["disapproval", 0.6129587888717651], ["annoyance", 0.2502882480621338]], "distress": [["Depression", 0.46777138113975525], ["Suicidal", 0.49421635270118713]], "sender": "user"}, {"timestamp": "2025-09-16T10:34:31.565251", "user_input": "Every day hurts, and sometimes I wish it would all just end.", "bot_response": "", "emotions": [["sadness", 0.8518880605697632], ["desire", 0.730620801448822], ["disappointment", 0.6340647339820862], ["optimism", 0.4723324775695801]], "distress": [["Depression", 0.4316655397415161], ["Suicidal", 0.5098035335540771]], "sender": "user"}, {"timestamp": "2025-09-16T10:48:20.264839", "user_input": "hi!", "bot_response": "", "emotions": [["neutral", 0.9040414690971375]], "distress": [["Normal", 0.9088038206100464]], "sender": "user"}, {"timestamp": "2025-09-16T10:49:25.112359", "user_input": "\"I just got a promotion at work! Feeling amazing today \ud83d\ude0a\"", "bot_response": "", "emotions": [["admiration", 0.8262422680854797], ["excitement", 0.7959957718849182], ["joy", 0.7872267365455627]], "distress": [["Normal", 0.8898702263832092]], "sender": "user"}, {"timestamp": "2025-09-16T10:49:50.743126", "user_input": "\"I had so much fun at the party last night!\"", "bot_response": "", "emotions": [["joy", 0.9298150539398193], ["amusement", 0.77484530210495], ["excitement", 0.4590000510215759]], "distress": [["Normal", 0.9122825860977173]], "sender": "user"}, {"timestamp": "2025-09-16T10:50:12.922505", "user_input": "\"I finally finished my project and it went well!\"", "bot_response": "", "emotions": [["joy", 0.730427086353302], ["admiration", 0.49590739607810974], ["approval", 0.4949006736278534], ["pride", 0.41033557057380676], ["excitement", 0.3687853217124939]], "distress": [["Normal", 0.9189355373382568]], "sender": "user"}, {"timestamp": "2025-09-16T10:50:33.335215", "user_input": "\"I feel so lonely and no one seems to care.\"", "bot_response": "", "emotions": [["sadness", 0.9852015376091003], ["disappointment", 0.5837377905845642]], "distress": [["Depression", 0.5399077534675598]], "sender": "user"}, {"timestamp": "2025-09-16T10:50:54.681634", "user_input": "\"I don\u2019t think I can handle this anymore.\"", "bot_response": "", "emotions": [["disapproval", 0.8147872686386108], ["sadness", 0.5720887184143066], ["disappointment", 0.45191654562950134]], "distress": [["Suicidal", 0.5234774351119995]], "sender": "user"}, {"timestamp": "2025-09-16T10:51:29.436417", "user_input": "\"Everything feels heavy and I just want to stay in bed.\"", "bot_response": "", "emotions": [["desire", 0.848065197467804], ["sadness", 0.6127186417579651], ["neutral", 0.5147730708122253], ["disappointment", 0.3866429328918457]], "distress": [["Normal", 0.7196476459503174]], "sender": "user"}, {"timestamp": "2025-09-16T10:55:37.233436", "user_input": "\"I am reading a book right now.\"", "bot_response": "", "emotions": [["neutral", 0.9281517863273621], ["approval", 0.36188656091690063], ["excitement", 0.28637248277664185]], "distress": [["Normal", 0.9182848334312439]], "sender": "user"}, {"timestamp": "2025-09-16T10:56:06.454248", "user_input": "\"I have a presentation tomorrow and I\u2019m so nervous.\"", "bot_response": "", "emotions": [["nervousness", 0.6886352300643921], ["fear", 0.5844287872314453]], "distress": [["Anxiety", 0.5740989446640015]], "sender": "user"}, {"timestamp": "2025-09-16T10:56:18.093633", "user_input": "\"I can\u2019t stop worrying about what might happen.\"", "bot_response": "", "emotions": [["fear", 0.8869730830192566], ["nervousness", 0.8549954295158386], ["disappointment", 0.3745359778404236]], "distress": [["Anxiety", 0.5798220634460449]], "sender": "user"}, {"timestamp": "2025-09-16T10:56:33.947710", "user_input": "\"My heart is racing and I feel on edge all the time.\"", "bot_response": "", "emotions": [["nervousness", 0.6367738246917725], ["neutral", 0.5230175256729126], ["fear", 0.5196651816368103]], "distress": [["Anxiety", 0.31995922327041626]], "sender": "user"}, {"timestamp": "2025-09-16T10:56:50.505198", "user_input": "\"I can\u2019t believe they canceled my favorite show!\"", "bot_response": "", "emotions": [["surprise", 0.9666505455970764], ["disappointment", 0.44213783740997314], ["disapproval", 0.4043504595756531], ["excitement", 0.35481569170951843]], "distress": [["Normal", 0.9154595732688904]], "sender": "user"}, {"timestamp": "2025-09-16T10:57:08.629872", "user_input": "\"Why does everything have to go wrong today?!\"", "bot_response": "", "emotions": [["curiosity", 0.8416714072227478], ["confusion", 0.6379289627075195], ["neutral", 0.442831426858902], ["annoyance", 0.3337796628475189], ["disappointment", 0.24382942914962769]], "distress": [["Normal", 0.8132485151290894]], "sender": "user"}, {"timestamp": "2025-09-16T10:57:23.581532", "user_input": "\"I\u2019m so mad at my friend for lying to me.\"", "bot_response": "", "emotions": [["anger", 0.9235208034515381], ["annoyance", 0.6545692086219788], ["disappointment", 0.3710581660270691]], "distress": [["Normal", 0.9182872176170349]], "sender": "user"}, {"timestamp": "2025-09-16T10:57:37.664719", "user_input": "\"I feel so lonely and no one seems to care.\"", "bot_response": "", "emotions": [["sadness", 0.9852015376091003], ["disappointment", 0.5837377905845642]], "distress": [["Depression", 0.5399077534675598]], "sender": "user"}, {"timestamp": "2025-09-16T10:57:49.777543", "user_input": "\"I don\u2019t think I can handle this anymore.\"", "bot_response": "", "emotions": [["disapproval", 0.8147872686386108], ["sadness", 0.5720887184143066], ["disappointment", 0.45191654562950134]], "distress": [["Suicidal", 0.5234774351119995]], "sender": "user"}], "3": [{"timestamp": "2025-09-16T16:06:20.225063", "user_input": "hi", "bot_response": "", "emotions": [["neutral", 0.9388443231582642]], "distress": [["Normal", 0.9141526222229004]], "sender": "user"}, {"timestamp": "2025-09-16T16:06:28.220377", "user_input": "how are you?", "bot_response": "", "emotions": [["curiosity", 0.8954654932022095], ["neutral", 0.6731707453727722]], "distress": [["Normal", 0.9284160733222961]], "sender": "user"}, {"timestamp": "2025-09-16T16:08:18.000327", "user_input": "\"I had rice and curry for lunch today.\"", "bot_response": "", "emotions": [["neutral", 0.9737315773963928], ["approval", 0.22279244661331177]], "distress": [["Normal", 0.9305332899093628]], "sender": "user"}, {"timestamp": "2025-09-16T16:08:34.506143", "user_input": "\"The weather is cloudy but not too cold.\"", "bot_response": "", "emotions": [["neutral", 0.9055079221725464], ["approval", 0.35813066363334656]], "distress": [["Normal", 0.9245803952217102]], "sender": "user"}, {"timestamp": "2025-09-16T16:08:50.427743", "user_input": "\"I\u2019m going to the library to return some books.\"", "bot_response": "", "emotions": [["neutral", 0.9616435170173645], ["approval", 0.24618008732795715]], "distress": [["Normal", 0.9180728793144226]], "sender": "user"}], "4": [{"timestamp": "2025-09-17T09:04:50.262539", "user_input": "hi", "bot_response": "", "emotions": [["neutral", 0.9388443231582642]], "distress": [["Normal", 0.9141526222229004]], "sender": "user"}, {"timestamp": "2025-09-17T09:05:19.905037", "user_input": "\"I\u2019m so glad I finally met my best friend today!\"", "bot_response": "", "emotions": [["joy", 0.9714090824127197], ["excitement", 0.5608581304550171], ["admiration", 0.37185952067375183]], "distress": [["Normal", 0.9113007187843323]], "sender": "user"}, {"timestamp": "2025-09-17T09:05:32.635445", "user_input": "\"I feel empty and just want to cry.\"", "bot_response": "", "emotions": [["sadness", 0.9934733510017395], ["disappointment", 0.35018473863601685]], "distress": [["Depression", 0.6384421586990356]], "sender": "user"}, {"timestamp": "2025-09-17T09:05:46.757014", "user_input": "\"This is so unfair, I can\u2019t stand it anymore!\"", "bot_response": "", "emotions": [["anger", 0.7790115475654602], ["disapproval", 0.7351595163345337], ["annoyance", 0.6250901818275452], ["disappointment", 0.4891332685947418], ["disgust", 0.303771436214447]], "distress": [["Depression", 0.45925450325012207]], "sender": "user"}, {"timestamp": "2025-09-17T09:06:08.733175", "user_input": "\"I\u2019m really scared about the future.\"", "bot_response": "", "emotions": [["fear", 0.9887455105781555], ["nervousness", 0.2574032247066498]], "distress": [["Anxiety", 0.3612351417541504]], "sender": "user"}, {"timestamp": "2025-09-17T09:06:24.498934", "user_input": "\"Wow, I wasn\u2019t expecting that gift at all!\"", "bot_response": "", "emotions": [["surprise", 0.97786545753479], ["excitement", 0.48443225026130676], ["realization", 0.36412379145622253]], "distress": [["Normal", 0.9246511459350586]], "sender": "user"}, {"timestamp": "2025-09-17T09:06:36.668720", "user_input": "\"I love spending time with my family.\"", "bot_response": "", "emotions": [["love", 0.9844669103622437], ["joy", 0.42644771933555603]], "distress": [["Normal", 0.926558256149292]], "sender": "user"}, {"timestamp": "2025-09-17T09:06:51.179155", "user_input": "\"I can\u2019t wait to go on vacation next week!\"", "bot_response": "", "emotions": [["excitement", 0.956108570098877], ["curiosity", 0.4540489912033081]], "distress": [["Normal", 0.920036256313324]], "sender": "user"}, {"timestamp": "2025-09-17T09:07:09.405378", "user_input": "\"Nothing feels interesting right now.\"", "bot_response": "", "emotions": [["neutral", 0.6602148413658142], ["disapproval", 0.539093554019928], ["disappointment", 0.37265434861183167]], "distress": [["Normal", 0.8763338923454285]], "sender": "user"}, {"timestamp": "2025-09-17T09:07:30.205051", "user_input": "\"I don\u2019t understand why this keeps happening.\"", "bot_response": "", "emotions": [["confusion", 0.9687660336494446], ["annoyance", 0.2763901948928833], ["disappointment", 0.26130104064941406], ["disapproval", 0.25641652941703796]], "distress": [["Normal", 0.7173131704330444]], "sender": "user"}, {"timestamp": "2025-09-17T09:07:44.439507", "user_input": "\"I\u2019m just sitting outside enjoying the fresh air.\"", "bot_response": "", "emotions": [["joy", 0.9788920879364014], ["neutral", 0.4176435172557831], ["approval", 0.2217693328857422]], "distress": [["Normal", 0.9067068696022034]], "sender": "user"}], "5": [{"timestamp": "2025-09-17T15:33:20.920318", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-17T15:33:49.461342", "user_input": "i am feeling sad today", "bot_response": "", "emotions": [["sadness", 0.9842734336853027]], "distress": [["Depression", 0.4007783830165863]], "sender": "user"}], "6": [{"timestamp": "2025-09-17T16:08:40.934015", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-17T16:09:59.940978", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-17T16:11:20.265719", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-17T16:11:38.141866", "user_input": "iam good to see you", "bot_response": "", "emotions": [["joy", 0.8125054836273193], ["admiration", 0.6300963759422302], ["gratitude", 0.42190811038017273], ["caring", 0.3568449914455414], ["excitement", 0.2547357380390167]], "distress": [["Normal", 0.9322733879089355]], "sender": "user"}, {"timestamp": "2025-09-17T16:12:05.644965", "user_input": "bye", "bot_response": "", "emotions": [["neutral", 0.9131028056144714]], "distress": [["Normal", 0.7455086708068848]], "sender": "user"}, {"timestamp": "2025-09-17T16:14:48.908560", "user_input": "hi", "bot_response": "", "emotions": [["neutral", 0.9388443231582642]], "distress": [["Normal", 0.9141526222229004]], "sender": "user"}, {"timestamp": "2025-09-17T16:15:10.232134", "user_input": "i am feeling nervous today ", "bot_response": "", "emotions": [["fear", 0.9732497334480286]], "distress": [["Anxiety", 0.8807194828987122]], "sender": "user"}, {"timestamp": "2025-09-17T16:15:50.626582", "user_input": "i am very nervous about tomorrows exam", "bot_response": "", "emotions": [["fear", 0.9767022132873535]], "distress": [["Anxiety", 0.8285872936248779]], "sender": "user"}, {"timestamp": "2025-09-17T16:32:33.342815", "user_input": "hello", "bot_response": "", "emotions": [["neutral", 0.9615991115570068]], "distress": [["Normal", 0.8664751052856445]], "sender": "user"}, {"timestamp": "2025-09-17T16:32:45.838520", "user_input": "how are you?", "bot_response": "", "emotions": [["curiosity", 0.8954654932022095], ["neutral", 0.6731707453727722]], "distress": [["Normal", 0.9284160733222961]], "sender": "user"}, {"timestamp": "2025-09-17T16:33:22.930575", "user_input": "i am feeling very nervous for todays report submition", "bot_response": "", "emotions": [["fear", 0.9730063676834106]], "distress": [["Anxiety", 0.8873283863067627]], "sender": "user"}, {"timestamp": "2025-09-17T16:33:49.092380", "user_input": "bye", "bot_response": "", "emotions": [["neutral", 0.9131028056144714]], "distress": [["Normal", 0.7455086708068848]], "sender": "user"}, {"timestamp": "2025-09-17T16:47:25.288275", "user_input": "hi", "bot_response": "", "emotions": [["neutral", 0.9388443231582642]], "distress": [["Normal", 0.9141526222229004]], "sender": "user"}, {"timestamp": "2025-09-17T16:47:41.566967", "user_input": "i am very happy today", "bot_response": "", "emotions": [["joy", 0.9916679859161377]], "distress": [["Normal", 0.8778542876243591]], "sender": "user"}, {"timestamp": "2025-09-17T16:48:15.102961", "user_input": "i am feeling nervous ", "bot_response": "", "emotions": [["fear", 0.9741689562797546]], "distress": [["Anxiety", 0.8915968537330627]], "sender": "user"}, {"timestamp": "2025-09-17T16:50:13.935486", "user_input": "exit", "bot_response": "", "emotions": [["neutral", 0.9538442492485046]], "distress": [["Depression", 0.44447827339172363]], "sender": "user"}, {"timestamp": "None", "user_input": NaN, "bot_response": "", "emotions": [], "distress": [], "sender": "user"}, {"timestamp": "None", "user_input": NaN, "bot_response": "", "emotions": [], "distress": [], "sender": "user"}, {"timestamp": "None", "user_input": NaN, "bot_response": "", "emotions": [], "distress": [], "sender": "user"}, {"timestamp": "None", "user_input": NaN, "bot_response": "", "emotions": [], "distress": [], "sender": "user"}]};
document.addEventListener("DOMContentLoaded", function(){
    const plots = document.getElementsByClassName('js-plotly-plot');
    if(plots.length===0) return;
    const plot = plots[0];

    let overlay = document.createElement("div");
    overlay.id = "flashOverlay"; overlay.style.position="fixed"; overlay.style.top="0"; overlay.style.left="0";
    overlay.style.width="100%"; overlay.style.height="100%"; overlay.style.backgroundColor="rgba(0,0,0,0.5)";
    overlay.style.display="none"; overlay.style.alignItems="center"; overlay.style.justifyContent="center"; overlay.style.zIndex="1000";
    document.body.appendChild(overlay);

    let flashDiv = document.createElement("div");
    flashDiv.id="flashcard"; flashDiv.style.border="1px solid #ddd"; flashDiv.style.borderRadius="10px";
    flashDiv.style.boxShadow="0 2px 6px rgba(0,0,0,0.25)"; flashDiv.style.padding="20px"; flashDiv.style.width="60%";
    flashDiv.style.maxHeight="80%"; flashDiv.style.overflowY="auto"; flashDiv.style.backgroundColor="#fff"; flashDiv.style.position="relative";
    overlay.appendChild(flashDiv);

    let closeBtn=document.createElement("span"); closeBtn.innerHTML="&times;";
    closeBtn.style.position="absolute"; closeBtn.style.top="10px"; closeBtn.style.right="15px";
    closeBtn.style.cursor="pointer"; closeBtn.style.fontSize="22px"; closeBtn.style.fontWeight="bold";
    flashDiv.appendChild(closeBtn);
    closeBtn.onclick=()=>{overlay.style.display="none"};
    overlay.onclick=(e)=>{if(e.target===overlay) overlay.style.display="none"};

    function countFrequencies(arr){
        let freq={};
        arr.forEach(v=>{
            if(Array.isArray(v)){
                v.forEach(e=>{ let label=Array.isArray(e)?e[0]:e; freq[label]=(freq[label]||0)+1;});}
            else { freq[v]=(freq[v]||0)+1; }
        });
        return freq;
    }

    plot.on('plotly_click', function(data){
        const session_id=String(data.points[0].customdata[0]);
        const messages=sessions_messages[session_id]; if(!messages) return;

        flashDiv.innerHTML=""; flashDiv.appendChild(closeBtn);
        let header=document.createElement("h3"); header.textContent="Session "+session_id; flashDiv.appendChild(header);

        let allEmo=[], allDist=[];
        messages.forEach(m=>{if(Array.isArray(m.emotions)) allEmo.push(m.emotions); if(Array.isArray(m.distress)) allDist.push(m.distress);});
        let emoCounts=countFrequencies(allEmo); let distCounts=countFrequencies(allDist);

        let summary=document.createElement("div");
        summary.innerHTML=`<h4>Summary</h4>
            <p><b>Start:</b>${messages[0].timestamp}</p>
            <p><b>End:</b>${messages[messages.length-1].timestamp}</p>
            <p><b>Messages:</b>${messages.length}</p>
            <p><b>Emotions Occurred:</b><ul>${Object.entries(emoCounts).map(([k,v])=>`<li>${k}: ${v}</li>`).join("")}</ul>
            <p><b>Distress Conditions Occurred:</b><ul>${Object.entries(distCounts).map(([k,v])=>`<li>${k}: ${v}</li>`).join("")}</ul>`;
        flashDiv.appendChild(summary);

        let log=document.createElement("div"); log.style.marginTop="15px"; log.innerHTML="<h4>Chat Log</h4>";
        let chatBox=document.createElement("div"); chatBox.style.display="flex"; chatBox.style.flexDirection="column";
        chatBox.style.gap="10px"; chatBox.style.padding="10px"; chatBox.style.border="1px solid #eee";
        chatBox.style.borderRadius="8px"; chatBox.style.backgroundColor="#fafafa"; chatBox.style.maxHeight="300px"; chatBox.style.overflowY="auto";

        messages.forEach(m=>{
            let bubble=document.createElement("div");
            bubble.style.padding="8px 12px"; bubble.style.borderRadius="8px"; bubble.style.maxWidth="75%";
            bubble.style.wordWrap="break-word"; bubble.style.fontSize="14px"; bubble.style.lineHeight="1.4";
            bubble.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)";
            if(m.sender==="user"){ bubble.style.alignSelf="flex-end"; bubble.style.backgroundColor="#d1e7dd"; }
            else { bubble.style.alignSelf="flex-start"; bubble.style.backgroundColor="#f8d7da"; }
            const emoLabels=Array.isArray(m.emotions)? m.emotions.map(e=>Array.isArray(e)?e[0]:e).join(", "):"";
            const distLabels=Array.isArray(m.distress)? m.distress.map(e=>Array.isArray(e)?e[0]:e).join(", "):"";
            bubble.innerHTML=`<b>[${m.timestamp}]</b><br>${m.user_input||m.bot_response}<br>
                <small>Emotions: ${emoLabels} | Distress: ${distLabels}</small>`;
            chatBox.appendChild(bubble);
        });
        log.appendChild(chatBox); flashDiv.appendChild(log); overlay.style.display="flex";
    });
});
</script>
    